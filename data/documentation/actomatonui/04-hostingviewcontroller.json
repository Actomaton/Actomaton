{"primaryContentSections":[{"kind":"content","content":[{"anchor":"Overview","level":2,"type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/03-RouteStore"},{"type":"text","text":" では、 UIKit を使った "},{"type":"codeVoice","code":"ViewController"},{"type":"text","text":" 画面を仮定して builder とルーティングを設計しましたが、"},{"type":"text","text":" "},{"type":"text","text":"SwiftUI の "},{"type":"codeVoice","code":"UIHostingController"},{"type":"text","text":" を使った場合でも同様の方法で作ることができます。"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"その際には ActomatonUI モジュールが提供する "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController"},{"type":"text","text":" の利用を検討してみて下さい。"}]},{"anchor":"HostingViewController-(for-SwiftUI)","level":2,"type":"heading","text":"HostingViewController (for SwiftUI)"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController"},{"type":"text","text":" はイニシャライザとして "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController\/init(store:content:)-5otox"},{"type":"text","text":" を持ち、"},{"type":"text","text":" "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/03-RouteStore"},{"type":"text","text":" の UIKit の例と同じく "},{"type":"codeVoice","code":"store"},{"type":"text","text":" を第 1 引数に受け取ることができます。"}]},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController"},{"type":"text","text":" の使用例は、次の通りです："}]},{"type":"codeListing","syntax":"swift","code":["import SwiftUI","import ActomatonUI","","\/\/ SwiftUI View の例","@MainActor","struct ContentView: View {","    private let store: Store<Action, State, Environment>","","    init(store: Store<Action, State, Environment>) {","        self.store = store","    }","","    var body: some View {","        WithViewStore(self.store) { viewStore in","            HStack {","                Text(\"\\(viewStore.state.count)\")","","                Button(action: { store.send(.increment) }) {","                    Image(systemName: \"plus.circle\")","                }","","                Button(action: { store.send(.push) }) {","                    Text(\"Navigation Push\")","                }","            }","        }","    }","}","","enum SwiftUIBuilder {","    static func buildNavigation() -> UIViewController {","        \/\/ RouteStore (ViewModel) の作成（前ページと同じ）","        let routeStore = RouteStore(","            state: State(),","            reducer: reducer,","            routeType: Route.self","        )","","        \/\/ HostingViewController を使った ViewController の作成","        let vc = HostingViewController(store: routeStore, content: ContentView.init)","","        let navC = UINavigationController(rootViewController: vc)","","        \/\/ ルーティング処理（前ページと同じ）","        store.subscribeRoutes { [weak navC] route in","            switch route {","            case let .push(count):","                let vc = NextBuilder.build(count: count)","                navC?.pushViewController(vc, animated: true)","            }","        }","","        return navC","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"ここで、 "},{"type":"codeVoice","code":"HostingViewController"},{"type":"text","text":" 初期化時の "},{"type":"codeVoice","code":"content"},{"type":"text","text":" に "},{"type":"codeVoice","code":"ContentView"},{"type":"text","text":" (SwiftUI View) のイニシャライザを渡します。"},{"type":"text","text":" "},{"type":"text","text":"同時に渡している "},{"type":"codeVoice","code":"RouteStore"},{"type":"text","text":" は、 "},{"type":"codeVoice","code":"ContentView"},{"type":"text","text":" の中では親クラスの "},{"type":"codeVoice","code":"Store"},{"type":"text","text":" に変換されます。"}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":""},{"type":"text","text":" "},{"type":"codeVoice","code":"ContentView"},{"type":"text","text":" 内部では、ルーティングに関する知識は必要ないため、 "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/RouteStore"},{"type":"text","text":" は "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/Store"},{"type":"text","text":" に"},{"type":"text","text":" "},{"type":"text","text":"アップキャストで忘却されています。"}]}]},{"anchor":"Next-Step","level":2,"type":"heading","text":"Next Step"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/05-ViewStore"}]}]}],"schemaVersion":{"major":0,"minor":2,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/actomatonui\/04-hostingviewcontroller"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/04-HostingViewController","interfaceLanguage":"swift"},"abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController"},{"type":"text","text":" を使った "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/RouteStore"},{"type":"text","text":" と SwiftUI の連携"}],"kind":"article","metadata":{"roleHeading":"Article","title":"4. HostingViewController","role":"article","modules":[{"name":"ActomatonUI"}]},"hierarchy":{"paths":[["doc:\/\/ActomatonUI\/documentation\/ActomatonUI"]]},"references":{"doc://ActomatonUI/documentation/ActomatonUI/Store":{"role":"symbol","title":"Store","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"Store"}],"abstract":[{"type":"codeVoice","code":"MainActomaton"},{"type":"text","text":"-erased wrapper which can "},{"type":"codeVoice","code":"map(state:)-1wcms"},{"type":"text","text":" into sub-store."}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/Store","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"Store"}],"url":"\/documentation\/actomatonui\/store"},"doc://ActomatonUI/documentation/ActomatonUI/RouteStore":{"role":"symbol","title":"RouteStore","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"RouteStore"}],"abstract":[{"type":"codeVoice","code":"Store"},{"type":"text","text":" wrapper that also outputs "},{"type":"codeVoice","code":"routes"},{"type":"text","text":", mainly used for UIKit’s navigation handling."}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/RouteStore","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"RouteStore"}],"url":"\/documentation\/actomatonui\/routestore"},"doc://ActomatonUI/documentation/ActomatonUI/ViewStore":{"role":"symbol","title":"ViewStore","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ViewStore"}],"abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/Store"},{"type":"text","text":"’s "},{"type":"codeVoice","code":"ObservableObject"},{"type":"text","text":" proxy type that can create direct (state-to-state) & indirect (state-to-action) "},{"type":"codeVoice","code":"Binding"},{"type":"text","text":"s."}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/ViewStore","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"ViewStore"}],"url":"\/documentation\/actomatonui\/viewstore"},"doc://ActomatonUI/documentation/ActomatonUI/05-ViewStore":{"role":"article","title":"5. ViewStore","abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/ViewStore"},{"type":"text","text":" を使った SwiftUI との連携"}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/05-ViewStore","kind":"article","type":"topic","url":"\/documentation\/actomatonui\/05-viewstore"},"doc://ActomatonUI/documentation/ActomatonUI":{"role":"collection","title":"ActomatonUI","abstract":[{"type":"text","text":"Swift Concurrency (async\/await、Structured Concurrency、Actor) を使った、状態と副作用の管理のためのフレームワーク。"}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI","kind":"symbol","type":"topic","url":"\/documentation\/actomatonui"},"doc://ActomatonUI/documentation/ActomatonUI/HostingViewController":{"role":"symbol","title":"HostingViewController","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"HostingViewController"}],"abstract":[{"type":"text","text":"SwiftUI "},{"type":"codeVoice","code":"View"},{"type":"text","text":" & "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/Store"},{"type":"text","text":" wrapper view controller that holds "},{"type":"codeVoice","code":"UIHostingController"},{"type":"text","text":"."}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HostingViewController"}],"url":"\/documentation\/actomatonui\/hostingviewcontroller"},"doc://ActomatonUI/documentation/ActomatonUI/03-RouteStore":{"role":"article","title":"3. RouteStore によるルーティング","abstract":[{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/RouteStore"},{"type":"text","text":" を使って他の "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/RouteStore"},{"type":"text","text":" にメッセージングする例"}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/03-RouteStore","kind":"article","type":"topic","url":"\/documentation\/actomatonui\/03-routestore"},"doc://ActomatonUI/documentation/ActomatonUI/HostingViewController/init(store:content:)-5otox":{"role":"symbol","title":"init(store:content:)","fragments":[{"kind":"identifier","text":"init"},{"kind":"text","text":"("},{"kind":"externalParam","text":"store"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"Store","preciseIdentifier":"s:11ActomatonUI5StoreC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC6Actionxmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC5Stateq_mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Environment","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC11Environmentq0_mfp"},{"kind":"text","text":">, "},{"kind":"externalParam","text":"content"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"Store","preciseIdentifier":"s:11ActomatonUI5StoreC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"Action","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC6Actionxmfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"State","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC5Stateq_mfp"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Environment","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC11Environmentq0_mfp"},{"kind":"text","text":">) -> "},{"kind":"typeIdentifier","text":"Content","preciseIdentifier":"s:11ActomatonUI21HostingViewControllerC7Contentq1_mfp"},{"kind":"text","text":")"}],"abstract":[{"type":"text","text":"Initializer for "},{"type":"reference","isActive":true,"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/Store"},{"type":"text","text":" as argument."}],"identifier":"doc:\/\/ActomatonUI\/documentation\/ActomatonUI\/HostingViewController\/init(store:content:)-5otox","kind":"symbol","type":"topic","url":"\/documentation\/actomatonui\/hostingviewcontroller\/init(store:content:)-5otox"}}}